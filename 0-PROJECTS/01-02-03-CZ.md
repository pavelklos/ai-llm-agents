<small>Claude Sonnet 4 **(Syst√©m pro L√©ka≈ôskou Diagnostiku a Doporuƒçen√≠ L√©ƒçby)**</small>
# Medical Diagnosis and Treatment Advisor

## Kl√≠ƒçov√© Koncepty

### Model Context Protocol (MCP)
MCP je standardn√≠ protokol pro komunikaci mezi AI modely a extern√≠mi syst√©my. Umo≈æ≈àuje strukturovanou v√Ωmƒõnu kontextov√Ωch informac√≠ a zaji≈°≈•uje konzistentn√≠ p≈ô√≠stup k dat≈Øm nap≈ô√≠ƒç r≈Øzn√Ωmi komponenty syst√©mu.

### MedPrompt
Specializovan√° technika promptov√°n√≠ optimalizovan√° pro medic√≠nsk√© aplikace. Zahrnuje strukturovan√© ≈°ablony pro diagnostick√© dotazy, symptomatick√© anal√Ωzy a doporuƒçen√≠ l√©ƒçby s d≈Ørazem na p≈ôesnost a bezpeƒçnost.

### LangGraph
Framework pro vytv√°≈ôen√≠ komplexn√≠ch workflow s AI agenty. Umo≈æ≈àuje definovat stavy, p≈ôechody a podm√≠nky pro pokroƒçil√© rozhodovac√≠ procesy v medic√≠nsk√Ωch aplikac√≠ch.

### Patient History Memory
Syst√©m pro ukl√°d√°n√≠ a spr√°vu historick√Ωch dat pacient≈Ø s mo≈ænost√≠ efektivn√≠ho vyhled√°v√°n√≠ a korelace symptom≈Ø nap≈ô√≠ƒç ƒçasov√Ωmi obdob√≠mi.

### Retrieval-Augmented Generation (RAG)
Technika kombinuj√≠c√≠ generativn√≠ AI s vyhled√°v√°n√≠m v datab√°zi znalost√≠ pro z√≠sk√°n√≠ relevantn√≠ch medic√≠nsk√Ωch informac√≠ a podobn√Ωch p≈ô√≠pad≈Ø.

### JSON Templates
Strukturovan√© ≈°ablony pro standardizaci medic√≠nsk√Ωch dat, diagn√≥z a doporuƒçen√≠ l√©ƒçby v konzistentn√≠m form√°tu.

## Komplexn√≠ Popis Projektu

Tento projekt p≈ôedstavuje pokroƒçil√Ω syst√©m pro podporu l√©ka≈ôsk√© diagnostiky vyu≈æ√≠vaj√≠c√≠ nejmodernƒõj≈°√≠ AI technologie. Syst√©m je navr≈æen jako asistent pro zdravotnick√© pracovn√≠ky, kter√Ω dok√°≈æe analyzovat strukturovan√° data pacient≈Ø, vyhled√°vat podobn√© p≈ô√≠pady v datab√°zi a generovat podlo≈æen√© diagnostick√© n√°vrhy s detailn√≠m od≈Øvodnƒõn√≠m.

### Hlavn√≠ C√≠le
- **Podpora rozhodov√°n√≠**: Poskytov√°n√≠ evidence-based doporuƒçen√≠ zalo≈æen√Ωch na anal√Ωze podobn√Ωch p≈ô√≠pad≈Ø
- **Standardizace postup≈Ø**: Jednotn√Ω p≈ô√≠stup k diagnostick√©mu procesu prost≈ôednictv√≠m strukturovan√Ωch ≈°ablon
- **Kontinuita p√©ƒçe**: Udr≈æov√°n√≠ kompletn√≠ historie pacienta s mo≈ænost√≠ sledov√°n√≠ v√Ωvoje stavu
- **Bezpeƒçnost**: Implementace kontroln√≠ch mechanism≈Ø a validace doporuƒçen√≠

### Technick√© V√Ωzvy
- Integrace heterogenn√≠ch medic√≠nsk√Ωch dat
- Zaji≈°tƒõn√≠ p≈ôesnosti a reliability AI doporuƒçen√≠
- Implementace efektivn√≠ho vyhled√°v√°n√≠ v rozs√°hl√Ωch datab√°z√≠ch
- Dodr≈æen√≠ medic√≠nsk√Ωch standard≈Ø a regulac√≠

## Implementace Projektu

````python
import asyncio
import json
import logging
from datetime import datetime, timedelta
from typing import Dict, List, Optional, Tuple
from dataclasses import dataclass, asdict
from enum import Enum
import uuid

# Z√°vislosti
from langchain.embeddings import OpenAIEmbeddings
from langchain.vectorstores import Chroma
from langchain.schema import Document
from langchain.chat_models import ChatOpenAI
from langchain.prompts import ChatPromptTemplate
from langgraph import StateGraph, END
from pydantic import BaseModel, Field
import numpy as np

# Logging konfigurace
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

class Severity(Enum):
    LOW = "n√≠zk√°"
    MODERATE = "st≈ôedn√≠"
    HIGH = "vysok√°"
    CRITICAL = "kritick√°"

class DiagnosisConfidence(Enum):
    LOW = "n√≠zk√°"
    MODERATE = "st≈ôedn√≠"
    HIGH = "vysok√°"

@dataclass
class Symptom:
    name: str
    severity: Severity
    duration_days: int
    description: str

@dataclass
class PatientData:
    patient_id: str
    age: int
    gender: str
    symptoms: List[Symptom]
    medical_history: List[str]
    medications: List[str]
    vital_signs: Dict[str, float]
    timestamp: datetime

@dataclass
class Diagnosis:
    condition: str
    confidence: DiagnosisConfidence
    reasoning: str
    recommended_tests: List[str]
    treatment_plan: List[str]
    urgency_level: Severity
    similar_cases: List[str]

class MedicalPromptTemplate:
    """Specializovan√© ≈°ablony pro medic√≠nsk√© prompty"""
    
    DIAGNOSIS_TEMPLATE = """
    Analyzujte n√°sleduj√≠c√≠ p≈ô√≠pad pacienta a poskytnƒõte strukturovanou diagn√≥zu:
    
    √öDAJE PACIENTA:
    - Vƒõk: {age}
    - Pohlav√≠: {gender}
    - Symptomy: {symptoms}
    - Anamn√©za: {medical_history}
    - L√©ky: {medications}
    - Vit√°ln√≠ funkce: {vital_signs}
    
    PODOBN√â P≈ò√çPADY:
    {similar_cases}
    
    Poskytnƒõte diagn√≥zu ve form√°tu:
    1. Pravdƒõpodobn√° diagn√≥za s √∫rovn√≠ jistoty
    2. Detailn√≠ od≈Øvodnƒõn√≠
    3. Doporuƒçen√° vy≈°et≈ôen√≠
    4. N√°vrh l√©ƒçby
    5. √örove≈à nal√©havosti
    
    Odpovƒõƒè strukturujte jako JSON.
    """

class PatientHistoryMemory:
    """Syst√©m pro spr√°vu historie pacient≈Ø"""
    
    def __init__(self):
        self.patients_data: Dict[str, List[PatientData]] = {}
        self.embeddings = OpenAIEmbeddings()
        self.vector_store = None
        self._initialize_vector_store()
    
    def _initialize_vector_store(self):
        """Inicializace vektorov√© datab√°ze"""
        try:
            self.vector_store = Chroma(
                embedding_function=self.embeddings,
                persist_directory="./medical_db"
            )
            logger.info("Vektorov√° datab√°ze inicializov√°na")
        except Exception as e:
            logger.error(f"Chyba p≈ôi inicializaci datab√°ze: {e}")
    
    async def add_patient_record(self, patient_data: PatientData):
        """P≈ôid√°n√≠ z√°znamu pacienta"""
        try:
            if patient_data.patient_id not in self.patients_data:
                self.patients_data[patient_data.patient_id] = []
            
            self.patients_data[patient_data.patient_id].append(patient_data)
            
            # Vytvo≈ôen√≠ dokumentu pro vektorov√© ulo≈æen√≠
            symptoms_text = ", ".join([
                f"{s.name} ({s.severity.value}, {s.duration_days} dn√≠)"
                for s in patient_data.symptoms
            ])
            
            document_text = f"""
            Pacient ID: {patient_data.patient_id}
            Vƒõk: {patient_data.age}, Pohlav√≠: {patient_data.gender}
            Symptomy: {symptoms_text}
            Anamn√©za: {', '.join(patient_data.medical_history)}
            L√©ky: {', '.join(patient_data.medications)}
            """
            
            document = Document(
                page_content=document_text,
                metadata={
                    "patient_id": patient_data.patient_id,
                    "timestamp": patient_data.timestamp.isoformat(),
                    "age": patient_data.age,
                    "gender": patient_data.gender
                }
            )
            
            await self._add_to_vector_store(document)
            logger.info(f"Z√°znam pacienta {patient_data.patient_id} p≈ôid√°n")
            
        except Exception as e:
            logger.error(f"Chyba p≈ôi p≈ôid√°v√°n√≠ z√°znamu: {e}")
    
    async def _add_to_vector_store(self, document: Document):
        """P≈ôid√°n√≠ dokumentu do vektorov√© datab√°ze"""
        try:
            self.vector_store.add_documents([document])
        except Exception as e:
            logger.error(f"Chyba p≈ôi ukl√°d√°n√≠ do vektorov√© datab√°ze: {e}")
    
    async def find_similar_cases(self, patient_data: PatientData, limit: int = 5) -> List[str]:
        """Vyhled√°n√≠ podobn√Ωch p≈ô√≠pad≈Ø"""
        try:
            symptoms_query = ", ".join([s.name for s in patient_data.symptoms])
            query = f"Vƒõk: {patient_data.age}, Symptomy: {symptoms_query}"
            
            similar_docs = self.vector_store.similarity_search(
                query, k=limit
            )
            
            return [doc.page_content for doc in similar_docs]
            
        except Exception as e:
            logger.error(f"Chyba p≈ôi vyhled√°v√°n√≠ podobn√Ωch p≈ô√≠pad≈Ø: {e}")
            return []

class DiagnosisAgent:
    """Agent pro generov√°n√≠ diagn√≥z"""
    
    def __init__(self):
        self.llm = ChatOpenAI(
            model="gpt-4o",
            temperature=0.1
        )
        self.prompt_template = ChatPromptTemplate.from_template(
            MedicalPromptTemplate.DIAGNOSIS_TEMPLATE
        )
    
    async def generate_diagnosis(
        self, 
        patient_data: PatientData, 
        similar_cases: List[str]
    ) -> Diagnosis:
        """Generov√°n√≠ diagn√≥zy na z√°kladƒõ dat pacienta"""
        try:
            # P≈ô√≠prava dat pro prompt
            symptoms_text = "\n".join([
                f"- {s.name}: {s.severity.value} z√°va≈ænost, "
                f"trv√°n√≠ {s.duration_days} dn√≠ - {s.description}"
                for s in patient_data.symptoms
            ])
            
            similar_cases_text = "\n".join([
                f"P≈ô√≠pad {i+1}: {case}" 
                for i, case in enumerate(similar_cases[:3])
            ])
            
            # Vytvo≈ôen√≠ promptu
            prompt = self.prompt_template.format_messages(
                age=patient_data.age,
                gender=patient_data.gender,
                symptoms=symptoms_text,
                medical_history=", ".join(patient_data.medical_history),
                medications=", ".join(patient_data.medications),
                vital_signs=json.dumps(patient_data.vital_signs, indent=2),
                similar_cases=similar_cases_text
            )
            
            # Generov√°n√≠ odpovƒõdi
            response = await self.llm.ainvoke(prompt)
            
            # Parsov√°n√≠ JSON odpovƒõdi
            diagnosis_data = self._parse_diagnosis_response(response.content)
            
            return Diagnosis(
                condition=diagnosis_data.get("condition", "Neurƒçeno"),
                confidence=DiagnosisConfidence(diagnosis_data.get("confidence", "n√≠zk√°")),
                reasoning=diagnosis_data.get("reasoning", ""),
                recommended_tests=diagnosis_data.get("recommended_tests", []),
                treatment_plan=diagnosis_data.get("treatment_plan", []),
                urgency_level=Severity(diagnosis_data.get("urgency_level", "n√≠zk√°")),
                similar_cases=similar_cases[:3]
            )
            
        except Exception as e:
            logger.error(f"Chyba p≈ôi generov√°n√≠ diagn√≥zy: {e}")
            return self._create_fallback_diagnosis()
    
    def _parse_diagnosis_response(self, response: str) -> Dict:
        """Parsov√°n√≠ JSON odpovƒõdi od LLM"""
        try:
            # Extrakce JSON z odpovƒõdi
            start_idx = response.find('{')
            end_idx = response.rfind('}') + 1
            json_str = response[start_idx:end_idx]
            return json.loads(json_str)
        except Exception as e:
            logger.error(f"Chyba p≈ôi parsov√°n√≠ odpovƒõdi: {e}")
            return {}
    
    def _create_fallback_diagnosis(self) -> Diagnosis:
        """Vytvo≈ôen√≠ z√°lo≈æn√≠ diagn√≥zy p≈ôi chybƒõ"""
        return Diagnosis(
            condition="Vy≈æaduje dal≈°√≠ vy≈°et≈ôen√≠",
            confidence=DiagnosisConfidence.LOW,
            reasoning="Syst√©m nemohl prov√©st √∫plnou anal√Ωzu",
            recommended_tests=["Kompletn√≠ klinick√© vy≈°et≈ôen√≠"],
            treatment_plan=["Konzultace s l√©ka≈ôem"],
            urgency_level=Severity.MODERATE,
            similar_cases=[]
        )

class DiagnosisWorkflowState(BaseModel):
    """Stav workflow pro diagnostiku"""
    patient_data: Optional[PatientData] = None
    similar_cases: List[str] = Field(default_factory=list)
    diagnosis: Optional[Diagnosis] = None
    validation_passed: bool = False
    error_message: Optional[str] = None

class MedicalDiagnosisSystem:
    """Hlavn√≠ syst√©m pro l√©ka≈ôskou diagnostiku"""
    
    def __init__(self):
        self.memory = PatientHistoryMemory()
        self.diagnosis_agent = DiagnosisAgent()
        self.workflow = self._create_workflow()
    
    def _create_workflow(self) -> StateGraph:
        """Vytvo≈ôen√≠ LangGraph workflow"""
        workflow = StateGraph(DiagnosisWorkflowState)
        
        # Definice uzl≈Ø
        workflow.add_node("validate_input", self._validate_input)
        workflow.add_node("find_similar_cases", self._find_similar_cases)
        workflow.add_node("generate_diagnosis", self._generate_diagnosis)
        workflow.add_node("validate_diagnosis", self._validate_diagnosis)
        
        # Definice p≈ôechod≈Ø
        workflow.set_entry_point("validate_input")
        workflow.add_edge("validate_input", "find_similar_cases")
        workflow.add_edge("find_similar_cases", "generate_diagnosis")
        workflow.add_edge("generate_diagnosis", "validate_diagnosis")
        workflow.add_edge("validate_diagnosis", END)
        
        return workflow.compile()
    
    async def _validate_input(self, state: DiagnosisWorkflowState) -> DiagnosisWorkflowState:
        """Validace vstupn√≠ch dat"""
        try:
            if not state.patient_data:
                state.error_message = "Chyb√≠ data pacienta"
                return state
            
            if not state.patient_data.symptoms:
                state.error_message = "Nejsou uvedeny ≈æ√°dn√© symptomy"
                return state
            
            state.validation_passed = True
            logger.info("Validace vstupn√≠ch dat √∫spƒõ≈°n√°")
            
        except Exception as e:
            state.error_message = f"Chyba p≈ôi validaci: {e}"
            logger.error(state.error_message)
        
        return state
    
    async def _find_similar_cases(self, state: DiagnosisWorkflowState) -> DiagnosisWorkflowState:
        """Vyhled√°n√≠ podobn√Ωch p≈ô√≠pad≈Ø"""
        try:
            if state.validation_passed and state.patient_data:
                similar_cases = await self.memory.find_similar_cases(
                    state.patient_data, limit=5
                )
                state.similar_cases = similar_cases
                logger.info(f"Nalezeno {len(similar_cases)} podobn√Ωch p≈ô√≠pad≈Ø")
            
        except Exception as e:
            state.error_message = f"Chyba p≈ôi vyhled√°v√°n√≠: {e}"
            logger.error(state.error_message)
        
        return state
    
    async def _generate_diagnosis(self, state: DiagnosisWorkflowState) -> DiagnosisWorkflowState:
        """Generov√°n√≠ diagn√≥zy"""
        try:
            if state.validation_passed and state.patient_data:
                diagnosis = await self.diagnosis_agent.generate_diagnosis(
                    state.patient_data, state.similar_cases
                )
                state.diagnosis = diagnosis
                logger.info("Diagn√≥za vygenerov√°na")
            
        except Exception as e:
            state.error_message = f"Chyba p≈ôi generov√°n√≠ diagn√≥zy: {e}"
            logger.error(state.error_message)
        
        return state
    
    async def _validate_diagnosis(self, state: DiagnosisWorkflowState) -> DiagnosisWorkflowState:
        """Validace diagn√≥zy"""
        try:
            if state.diagnosis:
                # Z√°kladn√≠ validace diagn√≥zy
                if not state.diagnosis.condition:
                    state.error_message = "Diagn√≥za neobsahuje stav"
                elif len(state.diagnosis.reasoning) < 50:
                    logger.warning("Diagn√≥za obsahuje kr√°tk√© od≈Øvodnƒõn√≠")
                
                logger.info("Validace diagn√≥zy dokonƒçena")
            
        except Exception as e:
            state.error_message = f"Chyba p≈ôi validaci diagn√≥zy: {e}"
            logger.error(state.error_message)
        
        return state
    
    async def diagnose_patient(self, patient_data: PatientData) -> Diagnosis:
        """Hlavn√≠ metoda pro diagnostiku pacienta"""
        try:
            # Ulo≈æen√≠ dat pacienta do pamƒõti
            await self.memory.add_patient_record(patient_data)
            
            # Spu≈°tƒõn√≠ workflow
            initial_state = DiagnosisWorkflowState(patient_data=patient_data)
            final_state = await self.workflow.ainvoke(initial_state)
            
            if final_state.error_message:
                logger.error(f"Chyba workflow: {final_state.error_message}")
                return self.diagnosis_agent._create_fallback_diagnosis()
            
            return final_state.diagnosis or self.diagnosis_agent._create_fallback_diagnosis()
            
        except Exception as e:
            logger.error(f"Chyba p≈ôi diagnostice: {e}")
            return self.diagnosis_agent._create_fallback_diagnosis()

class MedicalDataGenerator:
    """Gener√°tor testovac√≠ch medic√≠nsk√Ωch dat"""
    
    @staticmethod
    def create_sample_patients() -> List[PatientData]:
        """Vytvo≈ôen√≠ vzorov√Ωch dat pacient≈Ø"""
        patients = []
        
        # Pacient 1: Respiraƒçn√≠ probl√©my
        patient1 = PatientData(
            patient_id=str(uuid.uuid4()),
            age=45,
            gender="mu≈æ",
            symptoms=[
                Symptom("ka≈°el", Severity.HIGH, 7, "Such√Ω dr√°≈ædiv√Ω ka≈°el"),
                Symptom("du≈°nost", Severity.MODERATE, 5, "Du≈°nost p≈ôi n√°maze"),
                Symptom("horeƒçka", Severity.MODERATE, 3, "38.5¬∞C")
            ],
            medical_history=["astma", "alergie na pyl"],
            medications=["inhal√°tor", "antihistaminika"],
            vital_signs={
                "teplota": 38.5,
                "tlak_systolicky": 140,
                "tlak_diastolicky": 90,
                "puls": 95,
                "saturace": 94
            },
            timestamp=datetime.now()
        )
        
        # Pacient 2: Kardiovaskul√°rn√≠ probl√©my
        patient2 = PatientData(
            patient_id=str(uuid.uuid4()),
            age=62,
            gender="≈æena",
            symptoms=[
                Symptom("bolest na hrudi", Severity.HIGH, 2, "Tlakav√° bolest"),
                Symptom("√∫nava", Severity.MODERATE, 14, "V√Ωrazn√° √∫navnost"),
                Symptom("otoky doln√≠ch konƒçetin", Severity.LOW, 10, "M√≠rn√© otoky")
            ],
            medical_history=["hypertenze", "diabetes"],
            medications=["ACE inhibitor", "metformin"],
            vital_signs={
                "teplota": 36.8,
                "tlak_systolicky": 160,
                "tlak_diastolicky": 100,
                "puls": 88,
                "saturace": 98
            },
            timestamp=datetime.now() - timedelta(days=1)
        )
        
        # Pacient 3: Neurologick√© symptomy
        patient3 = PatientData(
            patient_id=str(uuid.uuid4()),
            age=28,
            gender="≈æena",
            symptoms=[
                Symptom("bolest hlavy", Severity.HIGH, 4, "Pulzuj√≠c√≠ bolest"),
                Symptom("nevolnost", Severity.MODERATE, 4, "Rann√≠ nevolnost"),
                Symptom("poruchy zraku", Severity.MODERATE, 2, "Rozmazan√© vidƒõn√≠")
            ],
            medical_history=["migr√©na"],
            medications=["sumatriptan"],
            vital_signs={
                "teplota": 36.6,
                "tlak_systolicky": 110,
                "tlak_diastolicky": 70,
                "puls": 72,
                "saturace": 99
            },
            timestamp=datetime.now() - timedelta(hours=6)
        )
        
        patients.extend([patient1, patient2, patient3])
        return patients

async def run_medical_diagnosis_demo():
    """Demonstrace syst√©mu l√©ka≈ôsk√© diagnostiky"""
    print("=== SYST√âM L√âKA≈òSK√â DIAGNOSTIKY ===\n")
    
    # Inicializace syst√©mu
    diagnosis_system = MedicalDiagnosisSystem()
    
    # Vytvo≈ôen√≠ vzorov√Ωch dat
    sample_patients = MedicalDataGenerator.create_sample_patients()
    
    print("Naƒç√≠t√°n√≠ vzorov√Ωch dat pacient≈Ø...\n")
    
    # P≈ôid√°n√≠ nƒõkolika pacient≈Ø do syst√©mu pro vytvo≈ôen√≠ datab√°ze
    for i, patient in enumerate(sample_patients[:-1]):
        await diagnosis_system.memory.add_patient_record(patient)
        print(f"‚úì P≈ôid√°n pacient {i+1} do datab√°ze")
    
    print("\n" + "="*50)
    print("ANAL√ùZA NOV√âHO PACIENTA")
    print("="*50)
    
    # Anal√Ωza posledn√≠ho pacienta
    test_patient = sample_patients[-1]
    
    print(f"\n√ödaje pacienta:")
    print(f"- ID: {test_patient.patient_id}")
    print(f"- Vƒõk: {test_patient.age}, Pohlav√≠: {test_patient.gender}")
    print(f"- Symptomy:")
    for symptom in test_patient.symptoms:
        print(f"  ‚Ä¢ {symptom.name} ({symptom.severity.value}) - {symptom.description}")
    print(f"- Anamn√©za: {', '.join(test_patient.medical_history)}")
    print(f"- L√©ky: {', '.join(test_patient.medications)}")
    
    print("\nGenerov√°n√≠ diagn√≥zy...")
    
    # Spu≈°tƒõn√≠ diagnostiky
    diagnosis = await diagnosis_system.diagnose_patient(test_patient)
    
    print("\n" + "="*50)
    print("V√ùSLEDEK DIAGN√ìZY")
    print("="*50)
    
    print(f"\nüè• Diagn√≥za: {diagnosis.condition}")
    print(f"üìä Jistota: {diagnosis.confidence.value}")
    print(f"‚ö° Nal√©havost: {diagnosis.urgency_level.value}")
    
    print(f"\nüìù Od≈Øvodnƒõn√≠:")
    print(f"{diagnosis.reasoning}")
    
    if diagnosis.recommended_tests:
        print(f"\nüî¨ Doporuƒçen√° vy≈°et≈ôen√≠:")
        for test in diagnosis.recommended_tests:
            print(f"- {test}")
    
    if diagnosis.treatment_plan:
        print(f"\nüíä Pl√°n l√©ƒçby:")
        for treatment in diagnosis.treatment_plan:
            print(f"- {treatment}")
    
    if diagnosis.similar_cases:
        print(f"\nüìã Podobn√© p≈ô√≠pady: {len(diagnosis.similar_cases)} nalezeno")

if __name__ == "__main__":
    # Spu≈°tƒõn√≠ demonstrace
    asyncio.run(run_medical_diagnosis_demo())
````

````python
# Z√°vislosti pro projekt l√©ka≈ôsk√© diagnostiky
langchain==0.1.0
langgraph==0.0.26
openai==1.3.0
chromadb==0.4.18
numpy==1.24.3
pydantic==2.5.0
python-dotenv==1.0.0
asyncio-mqtt==0.13.0
uvicorn==0.24.0
fastapi==0.104.0
````

````python
import os
from dotenv import load_dotenv

load_dotenv()

class Config:
    OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
    CHROMA_PERSIST_DIRECTORY = "./medical_db"
    LOG_LEVEL = "INFO"
    MAX_SIMILAR_CASES = 5
    
    # Medic√≠nsk√© nastaven√≠
    CONFIDENCE_THRESHOLD = 0.7
    URGENCY_MAPPING = {
        "kritick√°": ["chest pain", "difficulty breathing", "severe bleeding"],
        "vysok√°": ["high fever", "severe pain", "neurological symptoms"],
        "st≈ôedn√≠": ["moderate pain", "persistent symptoms"],
        "n√≠zk√°": ["mild symptoms", "routine check"]
    }
````

````bash
#!/bin/bash
# Skript pro nastaven√≠ prost≈ôed√≠

echo "Instalace z√°vislost√≠..."
pip install -r requirements.txt

echo "Vytvo≈ôen√≠ adres√°≈ô≈Ø..."
mkdir -p medical_db
mkdir -p logs

echo "Nastaven√≠ promƒõnn√Ωch prost≈ôed√≠..."
echo "OPENAI_API_KEY=your_openai_api_key_here" > .env

echo "Syst√©m je p≈ôipraven k pou≈æit√≠!"
echo "Nezapome≈àte nastavit OPENAI_API_KEY v souboru .env"
````

## Shrnut√≠ Projektu

Tento syst√©m pro l√©ka≈ôskou diagnostiku p≈ôedstavuje komplexn√≠ ≈ôe≈°en√≠ vyu≈æ√≠vaj√≠c√≠ nejmodernƒõj≈°√≠ AI technologie pro podporu zdravotnick√Ωch profesion√°l≈Ø. Kl√≠ƒçov√© hodnoty projektu:

### Hlavn√≠ P≈ô√≠nosy
- **Evidence-Based Medicine**: Doporuƒçen√≠ zalo≈æen√° na anal√Ωze podobn√Ωch p≈ô√≠pad≈Ø z datab√°ze
- **Strukturovan√Ω P≈ô√≠stup**: Jednotn√© JSON ≈°ablony pro v≈°echny medic√≠nsk√© procesy
- **Kontinuita P√©ƒçe**: Kompletn√≠ historie pacient≈Ø s mo≈ænost√≠ sledov√°n√≠ v√Ωvoje
- **≈†k√°lovatelnost**: Modul√°rn√≠ architektura umo≈æ≈àuj√≠c√≠ snadn√© roz≈°√≠≈ôen√≠

### Technologick√© Inovace
- **Hybrid RAG**: Kombinace vektorov√©ho vyhled√°v√°n√≠ s generativn√≠ AI
- **LangGraph Workflow**: Strukturovan√© ≈ô√≠zen√≠ diagnostick√©ho procesu
- **Memory Management**: Efektivn√≠ spr√°va historick√Ωch dat pacient≈Ø
- **Error Handling**: Robustn√≠ zpracov√°n√≠ chyb a z√°lo≈æn√≠ mechanismy

### Praktick√© Vyu≈æit√≠
Syst√©m m≈Ø≈æe b√Ωt implementov√°n v nemocnic√≠ch, klinik√°ch nebo jako souƒç√°st elektronick√Ωch zdravotn√≠ch z√°znam≈Ø pro podporu l√©ka≈ôsk√Ωch rozhodnut√≠, standardizaci diagnostick√Ωch postup≈Ø a zlep≈°en√≠ kvality p√©ƒçe o pacienty.